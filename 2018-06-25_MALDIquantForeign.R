if (!require("MALDIquant")) install.packages("MALDIquant")
if (!require("MALDIquantForeign")) install.packages("MALDIquantForeign")

library("MALDIquant")
library("MALDIquantForeign")

myimportTxt <- function (datadir,filename){
  importCsv(paste(datadir,filename,sep=""),centroided=TRUE)
}

datadir <- "f:/2016_MTB/Data/20180625_non-CRE_58_CRE_58_Intensity/"

dataFileName <-c(
  "B1050328-154.csv",
  "B1050603-077.csv",
  "B1050723-021.csv",
  "B1050902-121.csv",
  "B1060202-094.csv",
  "B1060217-087.csv",
  "B1060311-004.csv",
  "B1060429-067.csv",
  "B1060522-013.csv",
  "B1060606-077.csv",
  "B1060704-084.csv",
  "B1061002-071.csv",
  "B1061025-055.csv",
  "M1050108-162.csv",
  "M1050123-092.csv",
  "M1050128-177.csv",
  "M1050314-245.csv",
  "M1050420-111.csv",
  "M1050501-018.csv",
  "M1050824-079.csv",
  "M1050926-240.csv",
  "M1051122-089.csv",
  "M1051223-071.csv",
  "M1051230-039.csv",
  "M1060108-042.csv",
  "M1060108-060.csv",
  "M1060112-033.csv",
  "M1060118-031.csv",
  "M1060123-258.csv",
  "M1060202-212.csv",
  "M1060214-012.csv",
  "M1060226-032.csv",
  "M1060314-010.csv",
  "M1060421-139.csv",
  "M1060522-008.csv",
  "M1060630-118.csv",
  "M1060702-055.csv",
  "M1060716-086.csv",
  "M1060723-056.csv",
  "M1060808-110.csv",
  "M1060810-148.csv",
  "M1060814-076.csv",
  "M1060815-124.csv",
  "M1060908-027.csv",
  "M1060912-032.csv",
  "M1061023-229.csv",
  "B1050119-108.csv",
  "B1050125-102.csv",
  "B1050219-053.csv",
  "B1050414-116.csv",
  "B1050422-104.csv",
  "B1050429-048.csv",
  "B1050704-185.csv",
  "B1050714-125.csv",
  "B1050802-057.csv",
  "B1050906-127.csv",
  "B1051019-050.csv",
  "B1060117-004.csv",
  "B1060125-048.csv",
  "B1060125-147.csv",
  "B1060126-056.csv",
  "B1060126-097.csv",
  "B1060216-038.csv",
  "B1060223-006.csv",
  "B1060223-082.csv",
  "B1060310-011.csv",
  "B1060320-165.csv",
  "B1060326-068.csv",
  "B1060402-034.csv",
  "B1060404-034.csv",
  "B1060406-071.csv",
  "B1060409-035.csv",
  "B1060413-035.csv",
  "B1060421-102.csv",
  "B1060422-055.csv",
  "B1060429-096.csv",
  "B1060508-118.csv",
  "B1060510-109.csv",
  "B1060512-043.csv",
  "B1060518-059.csv",
  "B1060518-100.csv",
  "B1060910-039.csv",
  "B1060919-032.csv",
  "B1060923-134.csv",
  "B1061015-054.csv",
  "B1061021-093.csv",
  "B1061025-014.csv",
  "M1050120-162.csv",
  "M1050401-169.csv",
  "M1050912-089.csv",
  "M1060405-181.csv",
  "M1060407-138.csv",
  "M1060410-195.csv",
  "M1060414-167.csv",
  "M1060423-047.csv"
)

dataFileName


peaks <-c(
  myimportTxt(datadir,"B1050328-154.csv"),
  myimportTxt(datadir,"B1050603-077.csv"),
  myimportTxt(datadir,"B1050723-021.csv"),
  myimportTxt(datadir,"B1050902-121.csv"),
  myimportTxt(datadir,"B1060202-094.csv"),
  myimportTxt(datadir,"B1060217-087.csv"),
  myimportTxt(datadir,"B1060311-004.csv"),
  myimportTxt(datadir,"B1060429-067.csv"),
  myimportTxt(datadir,"B1060522-013.csv"),
  myimportTxt(datadir,"B1060606-077.csv"),
  myimportTxt(datadir,"B1060704-084.csv"),
  myimportTxt(datadir,"B1061002-071.csv"),
  myimportTxt(datadir,"B1061025-055.csv"),
  myimportTxt(datadir,"M1050108-162.csv"),
  myimportTxt(datadir,"M1050123-092.csv"),
  myimportTxt(datadir,"M1050128-177.csv"),
  myimportTxt(datadir,"M1050314-245.csv"),
  myimportTxt(datadir,"M1050420-111.csv"),
  myimportTxt(datadir,"M1050501-018.csv"),
  myimportTxt(datadir,"M1050824-079.csv"),
  myimportTxt(datadir,"M1050926-240.csv"),
  myimportTxt(datadir,"M1051122-089.csv"),
  myimportTxt(datadir,"M1051223-071.csv"),
  myimportTxt(datadir,"M1051230-039.csv"),
  myimportTxt(datadir,"M1060108-042.csv"),
  myimportTxt(datadir,"M1060108-060.csv"),
  myimportTxt(datadir,"M1060112-033.csv"),
  myimportTxt(datadir,"M1060118-031.csv"),
  myimportTxt(datadir,"M1060123-258.csv"),
  myimportTxt(datadir,"M1060202-212.csv"),
  myimportTxt(datadir,"M1060214-012.csv"),
  myimportTxt(datadir,"M1060226-032.csv"),
  myimportTxt(datadir,"M1060314-010.csv"),
  myimportTxt(datadir,"M1060421-139.csv"),
  myimportTxt(datadir,"M1060522-008.csv"),
  myimportTxt(datadir,"M1060630-118.csv"),
  myimportTxt(datadir,"M1060702-055.csv"),
  myimportTxt(datadir,"M1060716-086.csv"),
  myimportTxt(datadir,"M1060723-056.csv"),
  myimportTxt(datadir,"M1060808-110.csv"),
  myimportTxt(datadir,"M1060810-148.csv"),
  myimportTxt(datadir,"M1060814-076.csv"),
  myimportTxt(datadir,"M1060815-124.csv"),
  myimportTxt(datadir,"M1060908-027.csv"),
  myimportTxt(datadir,"M1060912-032.csv"),
  myimportTxt(datadir,"M1061023-229.csv"),
  myimportTxt(datadir,"B1050119-108.csv"),
  myimportTxt(datadir,"B1050125-102.csv"),
  myimportTxt(datadir,"B1050219-053.csv"),
  myimportTxt(datadir,"B1050414-116.csv"),
  myimportTxt(datadir,"B1050422-104.csv"),
  myimportTxt(datadir,"B1050429-048.csv"),
  myimportTxt(datadir,"B1050704-185.csv"),
  myimportTxt(datadir,"B1050714-125.csv"),
  myimportTxt(datadir,"B1050802-057.csv"),
  myimportTxt(datadir,"B1050906-127.csv"),
  myimportTxt(datadir,"B1051019-050.csv"),
  myimportTxt(datadir,"B1060117-004.csv"),
  myimportTxt(datadir,"B1060125-048.csv"),
  myimportTxt(datadir,"B1060125-147.csv"),
  myimportTxt(datadir,"B1060126-056.csv"),
  myimportTxt(datadir,"B1060126-097.csv"),
  myimportTxt(datadir,"B1060216-038.csv"),
  myimportTxt(datadir,"B1060223-006.csv"),
  myimportTxt(datadir,"B1060223-082.csv"),
  myimportTxt(datadir,"B1060310-011.csv"),
  myimportTxt(datadir,"B1060320-165.csv"),
  myimportTxt(datadir,"B1060326-068.csv"),
  myimportTxt(datadir,"B1060402-034.csv"),
  myimportTxt(datadir,"B1060404-034.csv"),
  myimportTxt(datadir,"B1060406-071.csv"),
  myimportTxt(datadir,"B1060409-035.csv"),
  myimportTxt(datadir,"B1060413-035.csv"),
  myimportTxt(datadir,"B1060421-102.csv"),
  myimportTxt(datadir,"B1060422-055.csv"),
  myimportTxt(datadir,"B1060429-096.csv"),
  myimportTxt(datadir,"B1060508-118.csv"),
  myimportTxt(datadir,"B1060510-109.csv"),
  myimportTxt(datadir,"B1060512-043.csv"),
  myimportTxt(datadir,"B1060518-059.csv"),
  myimportTxt(datadir,"B1060518-100.csv"),
  myimportTxt(datadir,"B1060910-039.csv"),
  myimportTxt(datadir,"B1060919-032.csv"),
  myimportTxt(datadir,"B1060923-134.csv"),
  myimportTxt(datadir,"B1061015-054.csv"),
  myimportTxt(datadir,"B1061021-093.csv"),
  myimportTxt(datadir,"B1061025-014.csv"),
  myimportTxt(datadir,"M1050120-162.csv"),
  myimportTxt(datadir,"M1050401-169.csv"),
  myimportTxt(datadir,"M1050912-089.csv"),
  myimportTxt(datadir,"M1060405-181.csv"),
  myimportTxt(datadir,"M1060407-138.csv"),
  myimportTxt(datadir,"M1060410-195.csv"),
  myimportTxt(datadir,"M1060414-167.csv"),
  myimportTxt(datadir,"M1060423-047.csv")
)
peaks

binnedPeaks <- binPeaks(peaks, tolerance=0.001)

binnedPeaks

intensitymatrix<-intensityMatrix(binnedPeaks)

output<-data.frame(x=attr(intensitymatrix,'mass'), y=t(intensitymatrix))

output

lengths(output)

write.csv(output, paste(datadir,"20180626_CRE_46_non-CRE_49_Intensity.csv",sep=""),
          row.names=FALSE)

